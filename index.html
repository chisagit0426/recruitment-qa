<!DOCTYPE html>
<html lang="ja">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>採用プロセスQ&A</title>
  <style>
    * {
      margin: 0;
      padding: 0;
      box-sizing: border-box;
    }

    body {
      font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, "Helvetica Neue", Arial, sans-serif;
      background-color: #f5f5f5;
      height: 100vh;
      overflow: hidden;
    }

    .container {
      display: flex;
      flex-direction: column;
      height: 100vh;
      max-width: 1000px;
      margin: 0 auto;
      background-color: white;
      box-shadow: 0 0 20px rgba(0, 0, 0, 0.1);
    }

    .header {
      padding: 20px;
      background: linear-gradient(135deg, #2563eb 0%, #1d4ed8 100%);
      color: white;
      box-shadow: 0 2px 8px rgba(0, 0, 0, 0.1);
    }

    .header h1 {
      font-size: 22px;
      margin-bottom: 5px;
    }

    .header p {
      font-size: 14px;
      opacity: 0.9;
    }

    .breadcrumb {
      padding: 15px 20px;
      background-color: #f9fafb;
      border-bottom: 1px solid #e5e7eb;
      font-size: 14px;
      color: #6b7280;
    }

    .breadcrumb-link {
      color: #2563eb;
      cursor: pointer;
      text-decoration: none;
    }

    .breadcrumb-link:hover {
      text-decoration: underline;
    }

    .content {
      flex: 1;
      overflow-y: auto;
      padding: 30px;
    }

    /* 自然言語検索セクション */
    .nlp-search-section {
      background: linear-gradient(135deg, #f0f9ff 0%, #e0f2fe 100%);
      border: 2px solid #3b82f6;
      border-radius: 12px;
      padding: 24px;
      margin-bottom: 30px;
    }

    .nlp-search-title {
      font-size: 18px;
      font-weight: 600;
      color: #1e40af;
      margin-bottom: 8px;
      display: flex;
      align-items: center;
      gap: 8px;
    }

    .nlp-search-desc {
      font-size: 14px;
      color: #64748b;
      margin-bottom: 16px;
    }

    .nlp-search-input-wrapper {
      display: flex;
      gap: 12px;
      margin-bottom: 12px;
    }

    .nlp-search-input {
      flex: 1;
      padding: 14px 16px;
      border: 2px solid #e5e7eb;
      border-radius: 8px;
      font-size: 15px;
      font-family: inherit;
      transition: border-color 0.2s;
    }

    .nlp-search-input:focus {
      outline: none;
      border-color: #3b82f6;
    }

    .nlp-search-button {
      padding: 14px 32px;
      background-color: #3b82f6;
      color: white;
      border: none;
      border-radius: 8px;
      font-size: 15px;
      font-weight: 500;
      cursor: pointer;
      transition: background-color 0.2s;
      white-space: nowrap;
    }

    .nlp-search-button:hover {
      background-color: #2563eb;
    }

    .nlp-search-examples {
      font-size: 13px;
      color: #64748b;
    }

    .nlp-search-examples span {
      color: #3b82f6;
      cursor: pointer;
      text-decoration: underline;
    }

    .nlp-search-examples span:hover {
      color: #2563eb;
    }

    /* 検索結果セクション */
    .search-results {
      margin-bottom: 30px;
    }

    .search-result-card {
      background: white;
      border: 2px solid #3b82f6;
      border-radius: 12px;
      padding: 24px;
      margin-bottom: 16px;
    }

    .search-result-header {
      display: flex;
      align-items: center;
      justify-content: space-between;
      margin-bottom: 12px;
      padding-bottom: 12px;
      border-bottom: 2px solid #e5e7eb;
    }

    .search-result-category {
      font-size: 13px;
      color: #6b7280;
      background-color: #f3f4f6;
      padding: 4px 12px;
      border-radius: 12px;
    }

    .search-result-question {
      font-size: 18px;
      font-weight: 600;
      color: #1f2937;
      margin-bottom: 16px;
    }

    .search-result-answer {
      font-size: 15px;
      color: #374151;
      line-height: 1.8;
      white-space: pre-wrap;
    }

    .no-results-card {
      background: #fef2f2;
      border: 2px solid #ef4444;
      border-radius: 12px;
      padding: 24px;
      text-align: center;
    }

    .no-results-title {
      font-size: 18px;
      font-weight: 600;
      color: #991b1b;
      margin-bottom: 12px;
    }

    .no-results-message {
      font-size: 15px;
      color: #7f1d1d;
      margin-bottom: 16px;
    }

    .google-form-link {
      display: inline-block;
      padding: 12px 24px;
      background-color: #ef4444;
      color: white;
      text-decoration: none;
      border-radius: 8px;
      font-weight: 500;
      transition: background-color 0.2s;
    }

    .google-form-link:hover {
      background-color: #dc2626;
    }

    .divider {
      text-align: center;
      margin: 30px 0;
      position: relative;
    }

    .divider::before {
      content: '';
      position: absolute;
      top: 50%;
      left: 0;
      right: 0;
      height: 1px;
      background-color: #e5e7eb;
    }

    .divider-text {
      display: inline-block;
      background-color: white;
      padding: 0 16px;
      color: #6b7280;
      font-size: 14px;
      position: relative;
      z-index: 1;
    }

    .category-grid {
      display: grid;
      grid-template-columns: repeat(auto-fit, minmax(280px, 1fr));
      gap: 20px;
      margin-bottom: 30px;
    }

    .category-card {
      background: white;
      border: 2px solid #e5e7eb;
      border-radius: 12px;
      padding: 24px;
      cursor: pointer;
      transition: all 0.2s;
    }

    .category-card:hover {
      border-color: #2563eb;
      box-shadow: 0 4px 12px rgba(37, 99, 235, 0.1);
      transform: translateY(-2px);
    }

    .category-icon {
      font-size: 32px;
      margin-bottom: 12px;
    }

    .category-title {
      font-size: 18px;
      font-weight: 600;
      color: #1f2937;
      margin-bottom: 8px;
    }

    .category-desc {
      font-size: 14px;
      color: #6b7280;
      line-height: 1.5;
    }

    .question-list {
      display: flex;
      flex-direction: column;
      gap: 12px;
    }

    .question-item {
      background: white;
      border: 1px solid #e5e7eb;
      border-radius: 8px;
      padding: 16px 20px;
      cursor: pointer;
      transition: all 0.2s;
      display: flex;
      align-items: center;
      justify-content: space-between;
    }

    .question-item:hover {
      background-color: #f9fafb;
      border-color: #2563eb;
    }

    .question-text {
      font-size: 15px;
      color: #1f2937;
      font-weight: 500;
    }

    .question-arrow {
      color: #9ca3af;
      font-size: 18px;
    }

    .answer-box {
      background-color: #f9fafb;
      border: 1px solid #e5e7eb;
      border-radius: 12px;
      padding: 24px;
      margin-top: 20px;
    }

    .answer-title {
      font-size: 18px;
      font-weight: 600;
      color: #1f2937;
      margin-bottom: 16px;
      padding-bottom: 12px;
      border-bottom: 2px solid #2563eb;
    }

    .answer-content {
      font-size: 15px;
      color: #374151;
      line-height: 1.8;
      white-space: pre-wrap;
    }

    .back-button {
      display: inline-flex;
      align-items: center;
      gap: 8px;
      padding: 10px 20px;
      background-color: #f3f4f6;
      color: #374151;
      border: none;
      border-radius: 8px;
      font-size: 14px;
      cursor: pointer;
      transition: background-color 0.2s;
      margin-bottom: 20px;
    }

    .back-button:hover {
      background-color: #e5e7eb;
    }

    .other-question-section {
      margin-top: 40px;
      padding-top: 30px;
      border-top: 2px solid #e5e7eb;
    }

    .other-question-title {
      font-size: 18px;
      font-weight: 600;
      color: #1f2937;
      margin-bottom: 16px;
    }

    .textarea-wrapper {
      margin-bottom: 16px;
    }

    .question-textarea {
      width: 100%;
      min-height: 120px;
      padding: 16px;
      border: 2px solid #e5e7eb;
      border-radius: 8px;
      font-size: 15px;
      font-family: inherit;
      resize: vertical;
      transition: border-color 0.2s;
    }

    .question-textarea:focus {
      outline: none;
      border-color: #2563eb;
    }

    .submit-button {
      padding: 12px 32px;
      background-color: #2563eb;
      color: white;
      border: none;
      border-radius: 8px;
      font-size: 15px;
      font-weight: 500;
      cursor: pointer;
      transition: background-color 0.2s;
    }

    .submit-button:hover {
      background-color: #1d4ed8;
    }

    .submit-button:disabled {
      background-color: #d1d5db;
      cursor: not-allowed;
    }

    .success-message {
      background-color: #d1fae5;
      border: 1px solid #6ee7b7;
      border-radius: 8px;
      padding: 16px;
      margin-top: 16px;
      color: #065f46;
      font-size: 14px;
    }

    @media (max-width: 768px) {
      .category-grid {
        grid-template-columns: 1fr;
      }
      
      .content {
        padding: 20px;
      }

      .nlp-search-input-wrapper {
        flex-direction: column;
      }

      .nlp-search-button {
        width: 100%;
      }
    }
  </style>
</head>
<body>
  <div class="container">
    <div class="header">
      <h1>採用プロセスQ&A</h1>
      <p>知りたい情報を検索、またはカテゴリから選択してください</p>
    </div>

    <div class="breadcrumb" id="breadcrumb">
      <a class="breadcrumb-link" onclick="goToTop()">トップ</a>
    </div>

    <div class="content" id="content">
      <!-- 初期表示内容はJavaScriptで生成 -->
    </div>
  </div>

  <script>
    // Q&Aデータベース（キーワード付き）
    const qaData = {
      googleFormUrl: 'https://docs.google.com/forms/d/e/1FAIpQLSfowpbJ1-RyQ1pOpeP_MYVaUQlUFqP1jLi_GudeVSnpXFJ7Aw/viewform',
      categories: [
        {
          id: 'basics',
          icon: '📍',
          title: '1. 前提・共通',
          description: '勤務地、勤務時間、言語要件など',
          questions: [
            {
              id: 'location',
              text: '就業場所',
              keywords: ['勤務地', '就業場所', 'オフィス', '場所', 'どこ', '勤務場所', 'ロケーション', 'リモート', '在宅'],
              answer: '【就業場所】\n\n本社：東京都渋谷区（渋谷駅徒歩5分）\n\nリモートワーク：週2-3日可能\n※職種・チームによる\n※試用期間中は原則出社\n\nサテライトオフィス：\n• 大阪オフィス（梅田）\n• 福岡オフィス（天神）\n\n転勤：原則なし\n※ただし、本人希望と事業ニーズが合致した場合は可能性あり'
            },
            {
              id: 'hours',
              text: '勤務時間・休日',
              keywords: ['勤務時間', '休日', '労働時間', '営業時間', '定時', '始業', '終業', '残業', '休み', '有給'],
              answer: '【勤務時間】\n\nフレックスタイム制\nコアタイム：11:00-15:00\n標準労働時間：8時間/日\n\n【休日】\n\n完全週休2日制（土日）\n祝日\n年末年始休暇（12/29-1/3）\n夏季休暇（3日）\n\n【年次有給休暇】\n\n初年度：入社月に応じて付与\n2年目以降：20日/年\n\n【その他休暇】\n\n慶弔休暇\n産前産後休暇\n育児休暇\n介護休暇'
            },
            {
              id: 'language',
              text: '語学要件',
              keywords: ['語学', '英語', '言語', 'TOEIC', '外国語', '日本語', '英語力', '語学力'],
              answer: '【語学要件】\n\n必須：\n• 日本語：ビジネスレベル\n\n推奨（職種による）：\n• 英語：ビジネスレベル（TOEIC 800点相当）\n• 技術文書の読解\n• 英語でのコミュニケーション\n\n優遇：\n• 英語でのプレゼンテーション経験\n• 多国籍チームでの業務経験\n• その他言語（中国語、韓国語等）\n\n※職種により要件は異なります'
            },
            {
              id: 'sidejob',
              text: '副業可否',
              keywords: ['副業', '兼業', 'サイドビジネス', 'ダブルワーク', '他社', '掛け持ち'],
              answer: '【副業】\n\n原則：許可制で可能\n\n条件：\n• 事前申請・承認が必要\n• 本業に支障がないこと\n• 競合他社でないこと\n• 会社の信用を損なわないこと\n• 情報漏洩リスクがないこと\n\n申請方法：\n人事部に「副業申請書」を提出\n\n審査期間：2週間程度\n\n承認実績：\n• 個人ブログ・アフィリエイト\n• 技術書執筆\n• 週末の講師業\n• コンサルティング（非競合）'
            }
          ]
        },
        {
          id: 'application',
          icon: '📝',
          title: '2. 応募方法',
          description: '推薦状、複数応募、締切など',
          questions: [
            {
              id: 'recommendation',
              text: '推薦状に年収記載は必須か',
              keywords: ['推薦状', '年収', '給与', '給料', '収入', '報酬', '記載', '必須', 'リファレンス'],
              answer: '【推薦状の年収記載】\n\n必須：はい\n\n記載内容：\n• 直近の年収（額面）\n• 基本給と賞与の内訳\n• 各種手当の有無\n\n理由：\n当社の給与体系との整合性確認のため\n\n記載形式：\n「年収：XXX万円（基本給：XXX万円、賞与：XXX万円）」\n\n注意点：\n• 正確な金額を記載してください\n• 推定や概算は避けてください\n• 源泉徴収票のコピー添付を推奨'
            },
            {
              id: 'multiple',
              text: '複数ポジションへの同時応募',
              keywords: ['複数', '同時', '併願', '両方', '2つ', '掛け持ち', 'ポジション', '職種'],
              answer: '【複数ポジションへの応募】\n\n可否：可能\n\n上限：2ポジションまで\n\n条件：\n• 応募時に全てのポジションを明記\n• それぞれのポジションへの志望動機を記載\n• スキル・経験が両方のポジションに適合していること\n\n選考：\n• 各ポジション個別に選考\n• 両方から内定が出た場合、候補者が選択\n• 一方不合格でも、他方の選考は継続\n\n注意点：\n• 同時期に2つ以上の選考が進むと、スケジュール調整が複雑になる可能性あり'
            },
            {
              id: 'deadline',
              text: '応募締切',
              keywords: ['締切', '応募期限', 'デッドライン', 'いつまで', '期限', '最終日'],
              answer: '【応募締切】\n\n原則：随時受付（通年採用）\n\n例外：\n• 急募ポジション：求人票に記載\n• 新卒採用：毎年3月末\n\n応募後の流れ：\n1. 書類受領後、3営業日以内に受付確認メール\n2. 1週間以内に書類選考結果を通知\n3. 通過者には面接日程調整の連絡\n\nおすすめ：\n早めの応募を推奨（応募者多数の場合、早期に募集終了する可能性あり）'
            }
          ]
        },
        {
          id: 'documents',
          icon: '📄',
          title: '3. 必要書類',
          description: '履歴書、職務経歴書など',
          questions: [
            {
              id: 'required-docs',
              text: '必須提出書類',
              keywords: ['書類', '提出', '必要', '履歴書', '職務経歴書', 'レジュメ', 'CV', '必須'],
              answer: '【必須書類】\n\n1. 履歴書\n   • 写真付き（3ヶ月以内）\n   • PDFまたはWord形式\n\n2. 職務経歴書\n   • A4で2-3ページ\n   • 具体的な実績を記載\n   • PDFまたはWord形式\n\n3. 推薦状（現職場または前職から）\n   • 直属上司からのもの\n   • 1ヶ月以内に発行されたもの\n\n提出方法：\nメール添付または応募フォームからアップロード'
            },
            {
              id: 'portfolio',
              text: 'ポートフォリオ・資格証明',
              keywords: ['ポートフォリオ', '作品', '実績', '資格', '証明書', 'GitHub', '成果物'],
              answer: '【ポートフォリオ】\n\n対象職種：\n• エンジニア：GitHubリポジトリ推奨\n• デザイナー：作品集（PDF or URL）\n• マーケター：施策実績まとめ\n\n【資格証明】\n\n提出が必要なケース：\n• 応募要件に資格が含まれる場合\n• 給与査定で資格手当の対象となる場合\n\n提出方法：\n• スキャンしたPDF\n• 写真（鮮明なもの）\n\n有効な資格例：\n• IT系：AWS認定、Google Cloud認定\n• 語学：TOEIC、TOEFL\n• 業務系：簿記、中小企業診断士'
            },
            {
              id: 'rejection',
              text: '書類不備による差し戻し基準',
              keywords: ['不備', '差し戻し', '却下', '不合格', '書類', 'NG', 'リジェクト'],
              answer: '【差し戻し基準】\n\n即座に差し戻しとなるケース：\n\n1. 必須書類の未提出\n   • 履歴書、職務経歴書、推薦状のいずれか欠如\n\n2. 記載不備\n   • 写真なし\n   • 連絡先不明\n   • 署名・捺印なし（書面の場合）\n\n3. フォーマット不適合\n   • 読めないファイル形式\n   • ファイル破損\n\n修正後の再提出：可能\n期限：指摘から3営業日以内'
            }
          ]
        },
        {
          id: 'selection',
          icon: '🎯',
          title: '4. 選考フロー',
          description: '面接回数、期間、適性検査など',
          questions: [
            {
              id: 'flow',
              text: '選考フロー全体',
              keywords: ['選考', 'フロー', '流れ', 'プロセス', 'ステップ', '手順', '面接', '何回'],
              answer: '【選考フロー】\n\n1. 書類選考（1週間）\n   ↓\n2. 一次面接（人事・現場責任者）\n   ↓\n3. 適性検査（オンライン）\n   ↓\n4. 二次面接（部門長）\n   ↓\n5. 最終面接（役員）\n   ↓\n6. 内定\n\n所要期間：2-4週間\n※ポジションにより変動あり'
            },
            {
              id: 'interview-details',
              text: '各面接の詳細',
              keywords: ['一次面接', '二次面接', '最終面接', '面接官', '質問', '内容', '時間'],
              answer: '【一次面接】\n時間：60分\n面接官：人事担当者 + 現場責任者\n内容：\n• 職務経歴の深掘り\n• スキル・経験の確認\n• カルチャーフィット\n\n【二次面接】\n時間：60分\n面接官：部門長\n内容：\n• 専門性の確認\n• 実務能力の評価\n• チーム適性\n\n【最終面接】\n時間：30-45分\n面接官：役員\n内容：\n• ビジョン・価値観の確認\n• 入社意思の確認\n• 条件面談\n\nすべてオンライン or 対面選択可'
            },
            {
              id: 'notification',
              text: '合否通知の期間',
              keywords: ['合否', '通知', '結果', '連絡', '何日', 'いつ', '期間'],
              answer: '【合否通知期間】\n\n書類選考：\n応募から1週間以内\n\n各面接後：\n面接実施から3-5営業日以内\n\n最終面接後：\n1週間以内に内定通知\n\n通知方法：\nメール（一次連絡）\n電話（最終面接後の内定通知）\n\n問い合わせ：\n期限を過ぎても連絡がない場合、\n人事部（hr@example.com）まで'
            },
            {
              id: 'test',
              text: '適性検査の有無・内容',
              keywords: ['適性検査', 'テスト', 'SPI', '試験', '筆記', '性格検査'],
              answer: '【適性検査】\n\n実施：あり（必須）\n\nタイミング：一次面接通過後\n\n内容：\n1. 能力検査（40分）\n   • 言語理解\n   • 数的処理\n   • 論理思考\n\n2. 性格検査（30分）\n   • 行動特性\n   • 思考パターン\n   • 組織適応性\n\n形式：オンライン（自宅受験可）\n\n期限：案内から1週間以内\n\nツール：SPI3\n\n結果：評価の一部として総合判定'
            },
            {
              id: 'tenure',
              text: '前職の在籍期間',
              keywords: ['在籍期間', '勤続年数', '経験年数', '何年', '短い', '転職回数'],
              answer: '【前職の在籍期間】\n\n重視度：中程度\n\n評価ポイント：\n• 在籍期間の長さそのものより、その間の成果を重視\n• 短期間でも明確な理由と実績があればOK\n\n懸念されるケース：\n• 1年未満の在籍が複数回\n• 退職理由が不明確\n\n説明が求められる内容：\n• なぜ転職を決めたか\n• 何を学び、何を達成したか\n• 当社で長く働く意思があるか\n\n評価基準：\n「期間」より「密度」と「成長」'
            }
          ]
        },
        {
          id: 'schedule',
          icon: '📅',
          title: '5. 面談日程・調整',
          description: '候補日提示、キャンセルなど',
          questions: [
            {
              id: 'date-options',
              text: '候補日提示のルール',
              keywords: ['候補日', '日程', '提示', 'スケジュール', '調整', '何日'],
              answer: '【候補日提示】\n\nお願い：\n第3希望まで提示してください\n\n推奨形式：\n「MM/DD（曜日） HH:00-HH:00」\n例：12/20（金） 14:00-17:00\n\n提示期間：\n当日から2週間先までの範囲\n\n時間帯：\n平日 9:00-18:00\n※18:00以降も相談可\n\n調整：\nこちらから候補日時を確定してご連絡\n\n変更：\n確定後の変更は、3営業日前までに連絡'
            },
            {
              id: 'holiday',
              text: '祝日・土日の面接',
              keywords: ['祝日', '土日', '休日', '週末', '平日以外', '土曜', '日曜'],
              answer: '【祝日・土日の面接】\n\n可否：応相談\n\n対応可能な場合：\n• 平日の調整が難しい方\n• 現職が多忙な方\n• 遠方からの来訪\n\n制約：\n• 面接官のスケジュール次第\n• 最終面接は平日のみ\n\n申請方法：\n日程調整時に「休日希望」と明記\n\n実施実績：\n土曜午前：対応可能なケースあり\n日曜・祝日：原則不可（要相談）'
            },
            {
              id: 'cancel',
              text: 'キャンセル・リスケ',
              keywords: ['キャンセル', 'リスケ', '延期', '変更', '日程変更', '都合が悪い'],
              answer: '【キャンセル・リスケジュール】\n\n変更期限：\n面接日の3営業日前まで\n\n連絡方法：\nメール（hr@example.com）\n件名：【日程変更希望】氏名\n\n記載内容：\n• 変更理由\n• 新しい候補日（3つ）\n\n緊急時：\n当日〜前日の変更は電話連絡必須\n（03-XXXX-XXXX）\n\nペナルティ：\n• 1回目：なし\n• 2回目：要説明\n• 3回目以降：選考継続の再検討\n\n無断キャンセル：\n即座に選考中止'
            },
            {
              id: 'items',
              text: '面接時の持ち物',
              keywords: ['持ち物', '必要なもの', '準備', '持参', '何を持っていく'],
              answer: '【面接時の持ち物】\n\n必須：\n• 身分証明書（運転免許証 or マイナンバーカード）\n• 筆記用具\n• メモ帳\n\n推奨：\n• 職務経歴書のコピー\n• ポートフォリオ（該当職種）\n• 質問リスト\n\nオンライン面接：\n• 安定したネット環境\n• イヤホン・マイク\n• 静かな環境\n\n服装：\nビジネスカジュアル\n※スーツ必須ではありません'
            },
            {
              id: 'materials',
              text: '事前配布物',
              keywords: ['事前配布', '資料', '送付', '事前送付', '事前に', '配布物'],
              answer: '【事前配布物】\n\n送付タイミング：\n面接日の3日前\n\n内容：\n• 会社案内資料\n• 当日の流れ\n• 面接官プロフィール\n• アクセス方法（対面の場合）\n• Zoomリンク（オンラインの場合）\n\n課題がある場合：\n• 一次面接前：なし\n• 二次面接前：職種により簡単な課題あり\n  （例：エンジニアはコーディング課題）\n• 事前送付し、面接時に発表・ディスカッション'
            }
          ]
        },
        {
          id: 'offer',
          icon: '💼',
          title: '6. 条件提示・クロージング',
          description: 'オファー、試用期間、福利厚生など',
          questions: [
            {
              id: 'offer-process',
              text: 'オファー面談の手順',
              keywords: ['オファー', '内定', '条件提示', '年収', '給与', '待遇', 'クロージング'],
              answer: '【オファー面談】\n\n実施タイミング：\n最終面接後、1週間以内\n\n形式：\n電話 → メール → 対面/オンライン面談\n\n内容：\n1. 内定通知\n2. オファーレター送付\n3. 条件説明（30-60分）\n   • 年収・給与体系\n   • 役職・ポジション\n   • 勤務条件\n   • 福利厚生\n4. 質疑応答\n5. 入社意思確認\n\n回答期限：\nオファー提示から1週間\n※延長相談可'
            },
            {
              id: 'trial',
              text: '試用期間・評価',
              keywords: ['試用期間', '試用', '本採用', '評価', 'トライアル', 'プロベーション'],
              answer: '【試用期間】\n\n期間：3ヶ月\n\n評価：試用期間終了時に実施\n\n待遇：本採用と同条件（給与・福利厚生）\n\n評価内容：\n• 業務遂行能力\n• 組織適応度\n• コミュニケーション\n• 出勤状況\n\n評価結果：\n• 本採用：通常はこちら\n• 延長：最大3ヶ月（稀）\n• 不採用：極めて稀（事前に複数回フィードバック）\n\n試用期間中のサポート：\n• メンター制度\n• 定期的な1on1\n• 研修プログラム'
            },
            {
              id: 'benefits',
              text: 'リモート手当・交通費',
              keywords: ['手当', 'リモート', '交通費', '通勤', '福利厚生', '支給', '補助'],
              answer: '【各種手当】\n\n交通費：\n• 全額支給（上限5万円/月）\n• 実費精算\n\nリモート手当：\n• 在宅勤務日×500円/日\n• 月末に支給\n\n残業手当：\n• 法定通り支給（管理職除く）\n• 1分単位で計算\n\nその他手当：\n• 役職手当（該当者のみ）\n• 資格手当（該当資格保持者）\n• 家族手当（扶養家族がいる場合）\n\n福利厚生：\n• 社会保険完備\n• 確定拠出年金（企業拠出あり）\n• 健康診断（年1回・無料）\n• 書籍購入補助（月5,000円まで）'
            },
            {
              id: 'negotiation',
              text: 'オファー面談の設定可否',
              keywords: ['面談', '交渉', '条件交渉', '相談', '話し合い', 'ディスカッション'],
              answer: '【オファー面談】\n\n実施：希望者全員に実施\n\n所要時間：30-60分\n\n形式：オンラインまたは対面\n\n目的：\n• 条件詳細説明\n• 質疑応答\n• 懸念解消\n• 入社後のイメージ共有\n\n面談で確認できること：\n• 給与・賞与の詳細\n• 働き方（リモート、残業等）\n• キャリアパス\n• 研修制度\n• チーム構成\n• 配属先の雰囲気\n\n条件交渉：\n• 年収：可能（ただし求人レンジ内）\n• 入社日：可能（最長3ヶ月まで調整可）\n• リモート：ポジションによる（要相談）'
            }
          ]
        },
        {
          id: 'onboarding',
          icon: '📋',
          title: '7. 入社前手続き',
          description: '内定後の連絡、提出書類など',
          questions: [
            {
              id: 'contact',
              text: '内定後の候補者への連絡方法',
              keywords: ['内定後', '連絡', '入社前', 'オンボーディング', '手続き', 'フォロー'],
              answer: '【内定後の流れ】\n\n1. オファー承諾後、即日連絡\n   方法：メール + 初回は電話でもご挨拶\n   担当：人事担当者\n\n2. 必要書類の案内（メール送付）\n   提出期限：入社日の14日前まで\n\n3. 入社日の確認・最終調整\n   • 希望日のヒアリング\n   • 引き継ぎ期間の考慮\n\n4. 入社前研修の案内（任意）\n   • オンライン研修\n   • 事前課題（職種による）\n\n初出社：\n時間：9:30集合（通常より30分早め）\n場所：本社1F受付\n持ち物：身分証明書、筆記用具、印鑑\n服装：ビジネスカジュアル'
            },
            {
              id: 'deadline',
              text: '提出期限',
              keywords: ['期限', '提出期限', 'デッドライン', 'いつまで', '締切'],
              answer: '【書類提出期限】\n\n原則：入社日の14日前まで\n\n提出書類：\n• 雇用契約書（署名・捺印済み）\n• 扶養控除等申告書\n• 年金手帳のコピー\n• 雇用保険被保険者証\n• マイナンバー確認書類\n• 給与振込口座情報\n\n提出方法：\n• 郵送または暗号化メール\n• 郵送先：入社確定時にお知らせ\n\n期限に間に合わない場合：\n• 必ず事前に連絡\n• 給与振込に影響する可能性あり\n• 個別相談可能'
            },
            {
              id: 'submission',
              text: '提出方法',
              keywords: ['提出方法', '送付', '郵送', 'メール', 'どうやって', '方法'],
              answer: '【提出方法】\n\n方法1：郵送\n• 送付先：入社確定時にお知らせ\n• 簡易書留推奨\n• 控えのコピーを保管\n\n方法2：暗号化メール\n• パスワード付きPDF\n• 別メールでパスワード送付\n• マイナンバーは郵送推奨\n\n方法3：初出社時に持参\n• 原本確認が必要な書類\n• 事前に人事へ連絡\n\n推奨：\n• 早めの提出\n• 不明点は事前に確認\n• 原本とコピーを区別'
            },
            {
              id: 'documents',
              text: '入社書類（雇用契約、扶養、年金/雇用保険、マイナンバー）',
              keywords: ['入社書類', '雇用契約', '扶養', '年金', '雇用保険', 'マイナンバー', '提出書類'],
              answer: '【提出書類一覧】\n\n1. 雇用契約書（当社作成）\n   部数：2部（署名・捺印して1部返送）\n\n2. 扶養控除等申告書\n   ※扶養家族がいる場合のみ\n\n3. 年金手帳のコピー\n   ※基礎年金番号が確認できるページ\n\n4. 雇用保険被保険者証\n   ※前職で発行されたもの（初めての就職は不要）\n\n5. マイナンバー確認書類\n   ※通知カードまたはマイナンバーカードのコピー\n\n6. 給与振込口座情報\n   ※通帳のコピーまたはキャプチャ\n\n7. 健康診断書（3ヶ月以内）\n   ※会社で受診する場合は不要\n\n8. 卒業証明書（新卒のみ）\n\n提出方法：郵送または暗号化メール\n期限：入社日の14日前まで'
            }
          ]
        }
      ]
    };

    let currentView = 'top';
    let selectedCategory = null;
    let selectedQuestion = null;
    let searchResults = [];

    // 初期表示
    function init() {
      showTopView();
    }

    // トップ画面
    function showTopView() {
      currentView = 'top';
      selectedCategory = null;
      selectedQuestion = null;
      searchResults = [];
      
      updateBreadcrumb();
      
      const content = document.getElementById('content');
      content.innerHTML = `
        <!-- 自然言語検索セクション -->
        <div class="nlp-search-section">
          <div class="nlp-search-title">
            🔍 自然言語で質問する
          </div>
          <div class="nlp-search-desc">
            質問を自由に入力してください。関連する回答を検索します。
          </div>
          <div class="nlp-search-input-wrapper">
            <input 
              type="text" 
              class="nlp-search-input" 
              id="nlpSearchInput"
              placeholder="例：推薦状に年収は必要ですか？"
              onkeypress="if(event.key==='Enter') performNLPSearch()"
            >
            <button class="nlp-search-button" onclick="performNLPSearch()">
              質問する
            </button>
          </div>
          <div class="nlp-search-examples">
            例：
            <span onclick="setExampleQuery('推薦状に年収は必要ですか？')">推薦状に年収は必要？</span> / 
            <span onclick="setExampleQuery('リモートワークはできますか？')">リモートワークは可能？</span> / 
            <span onclick="setExampleQuery('面接は何回ありますか？')">面接は何回？</span>
          </div>
        </div>

        <div class="divider">
          <span class="divider-text">またはカテゴリから選択</span>
        </div>

        <div class="category-grid">
          ${qaData.categories.map(cat => `
            <div class="category-card" onclick="selectCategory('${cat.id}')">
              <div class="category-icon">${cat.icon}</div>
              <div class="category-title">${cat.title}</div>
              <div class="category-desc">${cat.description}</div>
            </div>
          `).join('')}
        </div>
        
        <div class="other-question-section">
          <div class="other-question-title">💬 上記にない質問はこちら</div>
          <div class="textarea-wrapper">
            <textarea 
              class="question-textarea" 
              id="otherQuestion"
              placeholder="選択肢にない質問を自由に記入してください。担当者から回答いたします。"></textarea>
          </div>
          <button class="submit-button" onclick="submitOtherQuestion()">質問を送信</button>
          <div id="submitMessage"></div>
        </div>
      `;

      // フォーカスを検索欄に
      setTimeout(() => {
        document.getElementById('nlpSearchInput')?.focus();
      }, 100);
    }

    // 例文をセット
    function setExampleQuery(query) {
      document.getElementById('nlpSearchInput').value = query;
      performNLPSearch();
    }

    // 自然言語検索実行
    function performNLPSearch() {
      const input = document.getElementById('nlpSearchInput');
      const query = input.value.trim();
      
      if (!query) {
        alert('質問を入力してください。');
        return;
      }

      // キーワードマッチング
      searchResults = searchByKeywords(query);
      
      currentView = 'search-results';
      showSearchResults(query);
    }

    // キーワードマッチング関数
    function searchByKeywords(query) {
      const results = [];
      const queryLower = query.toLowerCase();
      
      // 全カテゴリ・全質問を検索
      qaData.categories.forEach(category => {
        category.questions.forEach(question => {
          let score = 0;
          
          // キーワードマッチング
          question.keywords.forEach(keyword => {
            if (queryLower.includes(keyword.toLowerCase())) {
              score += 2; // キーワード完全一致
            }
          });
          
          // 質問文との類似度
          if (queryLower.includes(question.text.toLowerCase()) || 
              question.text.toLowerCase().includes(queryLower)) {
            score += 3;
          }
          
          if (score > 0) {
            results.push({
              category: category,
              question: question,
              score: score
            });
          }
        });
      });
      
      // スコア順にソート
      results.sort((a, b) => b.score - a.score);
      
      // 上位3件まで
      return results.slice(0, 3);
    }

    // 検索結果表示
    function showSearchResults(query) {
      updateBreadcrumb();
      
      const content = document.getElementById('content');
      
      if (searchResults.length === 0) {
        // 結果なし
        content.innerHTML = `
          <button class="back-button" onclick="goToTop()">
            ← トップに戻る
          </button>

          <div class="no-results-card">
            <div class="no-results-title">該当する回答が見つかりませんでした</div>
            <div class="no-results-message">
              「${escapeHtml(query)}」に関する情報は、現在のQ&Aデータベースにありません。<br>
              お手数ですが、担当者にお問い合わせください。
            </div>
            <a href="${qaData.googleFormUrl}" target="_blank" class="google-form-link">
              📝 Google Formで問い合わせる
            </a>
          </div>
        `;
      } else {
        // 結果あり
        const resultsHtml = searchResults.map(result => `
          <div class="search-result-card">
            <div class="search-result-header">
              <span class="search-result-category">${result.category.title}</span>
            </div>
            <div class="search-result-question">${result.question.text}</div>
            <div class="search-result-answer">${result.question.answer}</div>
          </div>
        `).join('');
        
        content.innerHTML = `
          <button class="back-button" onclick="goToTop()">
            ← トップに戻る
          </button>

          <h2 style="font-size: 20px; color: #1f2937; margin-bottom: 20px;">
            「${escapeHtml(query)}」の検索結果（${searchResults.length}件）
          </h2>

          <div class="search-results">
            ${resultsHtml}
          </div>

          <div class="other-question-section">
            <div class="other-question-title">💬 他にも質問がある場合</div>
            <div class="textarea-wrapper">
              <textarea 
                class="question-textarea" 
                id="otherQuestion"
                placeholder="追加で質問があればご記入ください。担当者から回答いたします。"></textarea>
            </div>
            <button class="submit-button" onclick="submitOtherQuestion()">質問を送信</button>
            <div id="submitMessage"></div>
          </div>
        `;
      }
      
      // トップにスクロール
      document.getElementById('content').scrollTop = 0;
    }

    // HTMLエスケープ
    function escapeHtml(text) {
      const div = document.createElement('div');
      div.textContent = text;
      return div.innerHTML;
    }

    // カテゴリ選択
    function selectCategory(categoryId) {
      currentView = 'category';
      selectedCategory = qaData.categories.find(c => c.id === categoryId);
      
      updateBreadcrumb();
      
      const content = document.getElementById('content');
      content.innerHTML = `
        <button class="back-button" onclick="goToTop()">
          ← カテゴリ一覧に戻る
        </button>
        
        <h2 style="font-size: 24px; color: #1f2937; margin-bottom: 20px;">
          ${selectedCategory.icon} ${selectedCategory.title}
        </h2>
        
        <div class="question-list">
          ${selectedCategory.questions.map(q => `
            <div class="question-item" onclick="selectQuestion('${q.id}')">
              <span class="question-text">${q.text}</span>
              <span class="question-arrow">→</span>
            </div>
          `).join('')}
        </div>
        
        <div class="other-question-section">
          <div class="other-question-title">💬 上記にない質問はこちら</div>
          <div class="textarea-wrapper">
            <textarea 
              class="question-textarea" 
              id="otherQuestion"
              placeholder="選択肢にない質問を自由に記入してください。担当者から回答いたします。"></textarea>
          </div>
          <button class="submit-button" onclick="submitOtherQuestion()">質問を送信</button>
          <div id="submitMessage"></div>
        </div>
      `;
    }

    // 質問選択
    function selectQuestion(questionId) {
      currentView = 'answer';
      selectedQuestion = selectedCategory.questions.find(q => q.id === questionId);
      
      updateBreadcrumb();
      
      const content = document.getElementById('content');
      content.innerHTML = `
        <button class="back-button" onclick="selectCategory('${selectedCategory.id}')">
          ← 質問一覧に戻る
        </button>
        
        <div class="answer-box">
          <div class="answer-title">${selectedQuestion.text}</div>
          <div class="answer-content">${selectedQuestion.answer}</div>
        </div>
        
        <div class="other-question-section">
          <div class="other-question-title">💬 さらに質問がある場合</div>
          <div class="textarea-wrapper">
            <textarea 
              class="question-textarea" 
              id="otherQuestion"
              placeholder="追加で質問があればご記入ください。担当者から回答いたします。"></textarea>
          </div>
          <button class="submit-button" onclick="submitOtherQuestion()">質問を送信</button>
          <div id="submitMessage"></div>
        </div>
      `;
    }

    // パンくずリスト更新
    function updateBreadcrumb() {
      const breadcrumb = document.getElementById('breadcrumb');
      
      if (currentView === 'top') {
        breadcrumb.innerHTML = '<a class="breadcrumb-link" onclick="goToTop()">トップ</a>';
      } else if (currentView === 'search-results') {
        breadcrumb.innerHTML = `
          <a class="breadcrumb-link" onclick="goToTop()">トップ</a>
          <span style="margin: 0 8px;">/</span>
          <span>検索結果</span>
        `;
      } else if (currentView === 'category') {
        breadcrumb.innerHTML = `
          <a class="breadcrumb-link" onclick="goToTop()">トップ</a>
          <span style="margin: 0 8px;">/</span>
          <span>${selectedCategory.title}</span>
        `;
      } else if (currentView === 'answer') {
        breadcrumb.innerHTML = `
          <a class="breadcrumb-link" onclick="goToTop()">トップ</a>
          <span style="margin: 0 8px;">/</span>
          <a class="breadcrumb-link" onclick="selectCategory('${selectedCategory.id}')">${selectedCategory.title}</a>
          <span style="margin: 0 8px;">/</span>
          <span>${selectedQuestion.text}</span>
        `;
      }
    }

    // トップに戻る
    function goToTop() {
      showTopView();
    }

    // その他の質問を送信
    function submitOtherQuestion() {
      const textarea = document.getElementById('otherQuestion');
      const message = document.getElementById('submitMessage');
      const question = textarea.value.trim();
      
      if (!question) {
        message.innerHTML = '<div style="color: #dc2626; font-size: 14px; margin-top: 8px;">質問を入力してください。</div>';
        return;
      }
      
      // 現在のページ情報を取得
      let currentPage = 'トップページ';
      if (currentView === 'category' && selectedCategory) {
        currentPage = selectedCategory.title;
      } else if (currentView === 'answer' && selectedQuestion) {
        currentPage = `${selectedCategory.title} > ${selectedQuestion.text}`;
      } else if (currentView === 'search-results') {
        currentPage = '検索結果ページ';
      }
      
      // Google Formsに送信
      const GOOGLE_FORM_URL = 'https://docs.google.com/forms/d/e/1FAIpQLSfowpbJ1-RyQ1pOpeP_MYVaUQlUFqP1jLi_GudeVSnpXFJ7Aw/formResponse';
      
      const iframe = document.createElement('iframe');
      iframe.style.display = 'none';
      iframe.name = 'hidden_iframe';
      document.body.appendChild(iframe);
      
      const form = document.createElement('form');
      form.method = 'POST';
      form.action = GOOGLE_FORM_URL;
      form.target = 'hidden_iframe';
      
      const questionInput = document.createElement('input');
      questionInput.type = 'hidden';
      questionInput.name = 'entry.114042729';
      questionInput.value = question;
      form.appendChild(questionInput);
      
      const pageInput = document.createElement('input');
      pageInput.type = 'hidden';
      pageInput.name = 'entry.1713314985';
      pageInput.value = currentPage;
      form.appendChild(pageInput);
      
      const timestampInput = document.createElement('input');
      timestampInput.type = 'hidden';
      timestampInput.name = 'entry.1053862101';
      timestampInput.value = new Date().toISOString();
      form.appendChild(timestampInput);
      
      document.body.appendChild(form);
      form.submit();
      
      setTimeout(() => {
        document.body.removeChild(form);
        document.body.removeChild(iframe);
      }, 1000);
      
      console.log('質問送信:', {
        question: question,
        page: currentPage,
        timestamp: new Date().toISOString()
      });
      
      textarea.value = '';
      message.innerHTML = '<div class="success-message">✓ 質問を受け付けました。担当者から後ほど回答いたします。</div>';
      
      setTimeout(() => {
        message.innerHTML = '';
      }, 5000);
    }

    // 初期化
    init();
  </script>
</body>
</html>
